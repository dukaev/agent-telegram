# agent-telegram CLI

agent-telegram is a CLI tool for interacting with Telegram via IPC server.

## Global Flags
- `-s, --socket string` - Path to Unix socket (default "/tmp/agent-telegram.sock")
- `-v, --version` - Show version

## Server Commands

### login
Interactive login with Telegram authentication.

Usage: `agent-telegram login [flags]`

Flags:
- `--app-id string` - Telegram API App ID
- `--app-hash string` - Telegram API App Hash
- `--phone string` - Phone number
- `--mock` - Mock mode for UI testing (no real API calls)

### serve
Start IPC server with Telegram (Unix socket). Runs in background by default.

Usage: `agent-telegram serve [flags]`

Flags:
- `-f, --foreground` - Run in foreground (default: background)
- `-s, --socket string` - Path to Unix socket (default: /tmp/agent-telegram.sock)
- `--session string` - Path to Telegram session file (default: ~/.agent-telegram/session.json)

### status
Check if the IPC server is running. Returns server status and PID if running.

Usage: `agent-telegram status`

### watch
Watch server logs in real-time (like `docker logs -f`).

Usage: `agent-telegram watch`

## Messaging Commands

### send
Send a message or media to a Telegram peer.

Usage: `agent-telegram send [message] [flags]`

Flags:
- `-t, --to recipient` - Recipient (@username, username, or chat ID)
- `--caption string` - Caption for media
- `--file string` - Send file (auto-detect type)
- `--photo string` - Send photo
- `--video string` - Send video
- `--audio string` - Send audio
- `--document string` - Send document
- `--contact string` - Send contact (phone number)
- `--first-name string` - Contact first name
- `--last-name string` - Contact last name
- `--reply-to int` - Reply to message ID
- `--poll string` - Create poll with question
- `--option strings` - Poll options (can be used multiple times)
- `--latitude float` - Send location latitude
- `--longitude float` - Send location longitude
- `-j, --json` - Output as JSON

Examples:
- `agent-telegram send --to @user "Hello world"`
- `agent-telegram send --to @user --photo image.png`
- `agent-telegram send --to @user --poll "Question?" "Opt1" "Opt2"`

## Manage Messages Commands

### delete
Delete Telegram message(s).

Usage: `agent-telegram delete <peer> <message_id>...`

### forward
Forward a Telegram message to another user or chat.

Usage: `agent-telegram forward <from_peer> <message_id> <to_peer>`

### inspect-buttons
Inspect inline buttons in a message.

Usage: `agent-telegram inspect-buttons <peer> <message_id>`

### inspect-keyboard
Inspect reply keyboard buttons from a chat (bot only).

Usage: `agent-telegram inspect-keyboard <peer>`

### pin
Pin or unpin a Telegram message.

Usage: `agent-telegram pin <peer> <message_id> [--unpin]`

### press-button
Press an inline button in a message (bot only).

Usage: `agent-telegram press-button <peer> <message_id> <button_index>`

### reaction
Add a reaction to a Telegram message.

Usage: `agent-telegram reaction <peer> <message_id> <emoji>`

## User Commands

### ban
Block or unblock a Telegram peer.

Usage: `agent-telegram ban <peer> [--unblock]`

## Chat Commands

### archive
Archive or unarchive a Telegram chat.

Usage: `agent-telegram archive <peer> [--unarchive]`

### mute
Mute or unmute a Telegram chat.

Usage: `agent-telegram mute <peer> [--unmute]`

### pin-chat
Pin or unpin a chat in the dialog list.

Usage: `agent-telegram pin-chat <peer> [--unpin]`

## Get Commands

### chats
List Telegram chats.

Usage: `agent-telegram chats [flags]`

### info
Get information about a Telegram user. If no username provided, returns current user info.

Usage: `agent-telegram info [@username] [flags]`

Flags:
- `-j, --json` - Output as JSON

### open
Open and view messages from a Telegram user/chat.

Usage: `agent-telegram open <peer>`

### updates
Get Telegram updates (pops from store).

Usage: `agent-telegram updates`

## Typical Workflow

1. Login: `agent-telegram login`
2. Start server (background): `agent-telegram serve`
3. Check status: `agent-telegram status`
4. Send message: `agent-telegram send --to @user "Hello"`
5. Watch logs: `agent-telegram watch`
